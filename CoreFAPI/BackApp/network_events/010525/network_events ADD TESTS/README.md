# –°–µ—Ç–µ–≤—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

–°–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã–º–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ (–æ–Ω–ª–∞–π–Ω –∏ –æ—Ñ—Ñ–ª–∞–π–Ω), —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –æ–±–º–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **FastAPI**, **RabbitMQ** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏, **Redis** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ **PostgreSQL** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ api/            # –ú–∞—Ä—à—Ä—É—Ç—ã API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ db/             # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
‚îú‚îÄ‚îÄ services/       # –°–µ—Ä–≤–∏—Å—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ schemas/        # Pydantic-—Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ utils/          # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–∫–ª—é—á–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å RabbitMQ
docker/             # Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã **Docker** –∏ **Docker Compose**.

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å —Å –ø–æ–º–æ—â—å—é Docker Compose:

```bash
docker-compose up --build
```

## ‚öôÔ∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

- **app**: FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
- **mock_auth**: –º–æ–∫-—Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- **db**: PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.
- **redis**: Redis.
- **rabbitmq**: RabbitMQ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π.

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
DATABASE_URL=postgresql+asyncpg://user:password@db:5432/events_db
REDIS_URL=redis://localhost:6379/0
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672//

# ======== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Auth Proxy ========
AUTH_PROXY_URL=http://mock_auth:8080  # URL –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ auth-proxy
# –î–ª—è —Å–µ—Ä–≤–∏—Å–∞ auth-proxy
REQUEST_TIMEOUT=5

```

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã API

- `POST /events/` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.

```json
{
  "title": "–°–µ—Ç–µ–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ 2025",
  "description": "–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –¥–ª—è –æ–±—â–µ–Ω–∏—è –∏ –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥–∞.",
  "location": "Ru"
}
```

- `GET /events/{event_id}` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ø–æ ID.
- `GET /events/` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π.
- `DELETE /events/{event_id}` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è.
- `POST /register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ. –¢—Ä–µ–±—É–µ—Ç –∫—É–∫—É session_id, –Ω–∞–ø—Ä–∏–º–µ—Ä: session_id=test_session
- `GET /event/{event_id}/participant` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
- `DELETE /event/{event_id}/participant` ‚Äî –û—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–±—ã—Ç–∏—è.

## üîî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ

- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å `event_creation`.
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ —Å —Å–æ–±—ã—Ç–∏—è ‚Äî –≤ –æ—á–µ—Ä–µ–¥—å `event_participants`.

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ pytest —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º httpx.AsyncClient –∏ –º–æ–∫–æ–≤.

```bash
docker exec -it <'app_name'> pytest
```
- –ü–æ–∫—Ä—ã—Ç–∏–µ:
    –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –í–∞–∂–Ω–æ: –î–ª—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–∫-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (mock_auth). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫—É–∫–∞ session_id=test_session.

- Swagger UI: [http://localhost:8000/docs](http://localhost:8000/docs)
- ReDoc: [http://localhost:8000/redoc](http://localhost:8000/redoc)

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- RabbitMQ Management: [http://localhost:15672](http://localhost:15672)
- –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å: `guest / guest`
